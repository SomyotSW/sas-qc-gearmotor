<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ฟอร์มตรวจสอบ QC มอเตอร์เกียร์</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    body {
      background: url('/static/BG.jpg') no-repeat center center fixed;
      background-size: cover;
      font-family: 'Segoe UI', sans-serif;
    }
    .backdrop {
      background: rgba(255, 255, 255, 0.9);
      min-height: 100vh;
      padding: 30px;
    }
    .logo {
      position: absolute;
      top: 10px;
      right: 20px;
      height: 50px;
    }
    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <img src="/static/logo_sas.png" class="logo" alt="SAS Logo">
  <div class="container backdrop">
    <form id="qcForm" method="post" enctype="multipart/form-data">

      <!-- ประเภทสินค้า -->
      <div class="mb-3">
        <label class="form-label">ประเภทสินค้า</label>
        <select name="product_type" id="product_type" class="form-select" required>
          <option value="">-- เลือกประเภทสินค้า --</option>
          <option>AC/DC Gear Motor</option>
          <option>BLDC Gear Motor</option>
          <option>Servo Motor and Servo Drive</option>
          <option>Planetary Gear</option>
          <option>RFKS Series</option>
          <option>MTH/MTB Gear Box</option>
          <option>Others</option>
        </select>
      </div>

      <!-- Model -->
      <div class="mb-3">
        <label class="form-label">Model</label>
        <input type="text" name="motor_nameplate" class="form-control" required>
      </div>

      <!-- ค่ากระแสมอเตอร์ -->
      <div class="mb-3" id="motorCurrentField">
        <label class="form-label">ค่ากระแสมอเตอร์</label>
        <input type="text" name="motor_current" class="form-control">
      </div>

      <!-- อัตราทดเกียร์ -->
      <div class="mb-3" id="gearRatioField">
        <label class="form-label">อัตราทดเกียร์</label>
        <input type="text" name="gear_ratio" class="form-control">
      </div>

      <!-- เสียงเกียร์ -->
      <div class="mb-3" id="gearSoundField">
        <label class="form-label">เสียงเกียร์</label>
        <input type="text" name="gear_sound" class="form-control">
      </div>

      <!-- เติมน้ำมัน -->
      <div class="mb-3" id="oilField">
        <label class="form-label">การเติมน้ำมันเกียร์</label>
        <input type="checkbox" name="oil_filled" class="form-check-input"> เติมแล้ว
      </div>
      <p class="text-danger hidden" id="oilNote">*ไม่ต้องเติมน้ำมันเกียร์</p>

      <!-- ปุ่มเลือก (Motor, Gear, Controller) -->
      <div class="mb-3 hidden" id="deviceButtons">
        <label class="form-label">เลือกรายการตรวจสอบ</label><br>
        <input type="checkbox" id="btnMotor"> Motor
        <input type="checkbox" id="btnGear"> Gear
        <input type="checkbox" id="btnController"> Controller
      </div>

      <!-- ช่องแนบภาพ Controller -->
      <div class="mb-3 hidden" id="controllerImgField">
        <label class="form-label">แนบภาพ Controller <i class="bi bi-camera"></i></label>
        <input type="file" name="controller_img" id="controllerImg" accept="image/*" class="form-control">
      </div>

      <!-- ช่องแนบภาพ Servo -->
      <div id="servoFields" class="hidden">
        <div class="mb-3">
          <label class="form-label">แนบภาพ Servo Motor <i class="bi bi-camera"></i></label>
          <input type="file" name="servo_motor_img" accept="image/*" class="form-control" required>
        </div>
        <div class="mb-3">
          <label class="form-label">แนบภาพ Servo Drive <i class="bi bi-camera"></i></label>
          <input type="file" name="servo_drive_img" accept="image/*" class="form-control" required>
        </div>
        <div class="mb-3">
          <label class="form-label">แนบภาพ Cable Wire <i class="bi bi-camera"></i></label>
          <input type="file" name="cable_wire_img" accept="image/*" class="form-control" required>
        </div>
      </div>

      <!-- แนบภาพค่ากระแส -->
      <div class="mb-3">
        <label class="form-label">แนบภาพค่ากระแส <i class="bi bi-camera"></i></label>
        <input type="file" name="motor_current_img" accept="image/*" class="form-control">
      </div>

      <!-- แนบภาพเสียงเกียร์ -->
      <div class="mb-3">
        <label class="form-label">แนบภาพเสียงเกียร์ <i class="bi bi-camera"></i></label>
        <input type="file" name="gear_sound_img" accept="image/*" class="form-control">
      </div>

      <!-- แนบภาพการประกอบสินค้า -->
      <div class="mb-3">
        <label class="form-label">แนบภาพการประกอบสินค้า <i class="bi bi-camera"></i></label>
        <input type="file" name="assembly_img" accept="image/*" class="form-control" required>
      </div>

      <!-- ระยะเวลารับประกัน -->
      <div class="mb-3" id="warrantyField">
        <label class="form-label">ระยะเวลารับประกันสินค้า</label>
        <input type="text" name="warranty" class="form-control" id="warrantyInput" readonly>
      </div>
      <div class="mb-3 hidden" id="customWarranty">
        <label class="form-label">กรุณาเลือกระยะเวลารับประกัน</label><br>
        <div class="form-check form-check-inline">
          <input class="form-check-input" type="radio" name="custom_warranty" id="warranty18" value="18 เดือน">
          <label class="form-check-label" for="warranty18">18 เดือน</label>
        </div>
        <div class="form-check form-check-inline">
          <input class="form-check-input" type="radio" name="custom_warranty" id="warranty24" value="24 เดือน">
          <label class="form-check-label" for="warranty24">24 เดือน</label>
        </div>
      </div>

      <!-- ปุ่มส่ง -->
      <div class="d-grid">
        <button type="submit" class="btn btn-primary">ส่งข้อมูล QC</button>
      </div>
    </form>
  </div>

  <script>
    const productType = document.getElementById('product_type');
    const oilField = document.getElementById('oilField');
    const oilNote = document.getElementById('oilNote');
    const deviceButtons = document.getElementById('deviceButtons');
    const controllerBtn = document.getElementById('btnController');
    const controllerImgField = document.getElementById('controllerImgField');
    const motorCurrentField = document.getElementById('motorCurrentField');
    const gearRatioField = document.getElementById('gearRatioField');
    const gearSoundField = document.getElementById('gearSoundField');
    const servoFields = document.getElementById('servoFields');
    const customWarranty = document.getElementById('customWarranty');
    const warrantyInput = document.getElementById('warrantyInput');

    productType.addEventListener('change', function () {
      const type = productType.value;
      oilField.classList.remove('hidden');
      oilNote.classList.add('hidden');
      deviceButtons.classList.add('hidden');
      controllerImgField.classList.add('hidden');
      servoFields.classList.add('hidden');
      customWarranty.classList.add('hidden');
      motorCurrentField.classList.remove('hidden');
      gearRatioField.classList.remove('hidden');
      gearSoundField.classList.remove('hidden');

      if (type === 'AC/DC Gear Motor' || type === 'BLDC Gear Motor') {
        oilField.classList.add('hidden');
        oilNote.classList.remove('hidden');
        deviceButtons.classList.remove('hidden');
        warrantyInput.value = '18 เดือน (เริ่มนับหลังจากวันส่งสินค้า 7 วัน)';
      } else if (type === 'Servo Motor and Servo Drive') {
        oilField.classList.add('hidden');
        oilNote.classList.remove('hidden');
        motorCurrentField.classList.add('hidden');
        gearRatioField.classList.add('hidden');
        gearSoundField.classList.add('hidden');
        servoFields.classList.remove('hidden');
        warrantyInput.value = '18 เดือน (เริ่มนับหลังจากวันส่งสินค้า 7 วัน)';
      } else if (['Planetary Gear', 'RFKS Series'].includes(type)) {
        warrantyInput.value = '18 เดือน (เริ่มนับหลังจากวันส่งสินค้า 7 วัน)';
      } else if (type === 'MTH/MTB Gear Box') {
        warrantyInput.value = '24 เดือน (เริ่มนับหลังจากวันส่งสินค้า 7 วัน)';
      } else if (type === 'Others') {
        customWarranty.classList.remove('hidden');
        warrantyInput.value = '';
      } else {
        warrantyInput.value = '';
      }
    });

    controllerBtn.addEventListener('change', function () {
      const imgInput = document.getElementById('controllerImg');
      if (controllerBtn.checked) {
        controllerImgField.classList.remove('hidden');
        imgInput.setAttribute('required', 'required');
      } else {
        controllerImgField.classList.add('hidden');
        imgInput.removeAttribute('required');
      }
    });

    document.querySelectorAll('input[name=\"custom_warranty\"]').forEach(radio => {
      radio.addEventListener('change', function () {
        warrantyInput.value = `${this.value} (เริ่มนับหลังจากวันส่งสินค้า 7 วัน)`;
      });
    });

    document.getElementById('qcForm').addEventListener('submit', function (e) {
      if (controllerBtn.checked) {
        const img = document.getElementById('controllerImg');
        if (!img.files.length) {
          alert('กรุณาแนบภาพ Controller');
          e.preventDefault();
        }
      }
    });
  </script>
</body>
</html>
