<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• QC ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß</title>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Sarabun', sans-serif;
            margin: 0;
            padding: 0;
            background: url('/static/BG.png') center center / cover no-repeat;
            backdrop-filter: blur(4px);
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }
        .container {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 12px;
            padding: 30px;
            width: 90%;
            max-width: 480px;
            text-align: center;
            position: relative;
        }
        h2 {
            color: #2c7be5;
        }
        .logo {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 100px;
        }
        .serial {
            font-size: 18px;
            margin: 10px 0;
            font-weight: bold;
        }
        .btn {
            display: block;
            width: 100%;
            margin: 10px 0;
            padding: 12px;
            background: #2c7be5;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            text-decoration: none;
            transition: background 0.3s ease;
        }
        .btn:hover {
            background: #1a5fbd;
        }
        .qr-preview {
            margin: 20px auto;
            max-width: 200px;
            border: 1px solid #ccc;
            border-radius: 8px;
            background: white;
            padding: 10px;
        }
        .note {
            font-size: 13px;
            color: gray;
        }
        .warning {
            background: #fdd;
            color: red;
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
        }
	/* ‚úÖ NEW: Mobile Responsive */
  @media (max-width: 576px) {
    body {
      background-attachment: scroll;
      padding: 12px;
    }

    .container {
      width: 100%;
      max-width: 420px;
      padding: 18px;
      border-radius: 14px;
    }

    .logo {
      top: 10px;
      right: 10px;
      width: 78px;
    }

    h2 {
      font-size: 1.15rem;
      margin-top: 4px;
    }

    .serial {
      font-size: 0.95rem;
      word-break: break-word; /* ‚úÖ ‡∏Å‡∏±‡∏ô Serial ‡∏•‡πâ‡∏ô‡∏à‡∏≠ */
    }

    .qr-preview {
      max-width: 180px;
      padding: 8px;
    }

    .btn {
      font-size: 1rem;
      padding: 12px;
    }
  }
    </style>
</head>

<body>
    <div class="container">
        <img src="/static/logo_sas.png" alt="SAS Logo" class="logo">
        <h2>‚úÖ ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• QC ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß</h2>
        <div class="serial">Serial Number: {{ serial_number }}</div>

        {% if qr_url != "#" and qc_url != "#" %}
            <div class="qr-preview">
                <img src="{{ qr_url }}" alt="QR Code" style="width: 100%; height: auto;">
                <div class="note">‡∏™‡πÅ‡∏Å‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô QC Report</div>
            </div>

            <a class="btn" href="{{ qc_url }}" target="_blank">üìÑ ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô QC Report (PDF)</a>

            <!-- ‚úÖ UPDATED: ‡∏Å‡∏î‡πÅ‡∏•‡πâ‡∏ß‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏ó‡∏±‡∏ô‡∏ó‡∏µ (‡πÄ‡∏£‡∏µ‡∏¢‡∏Å endpoint ‡∏ó‡∏µ‡πà‡∏Ñ‡∏∑‡∏ô‡πÑ‡∏ü‡∏•‡πå PNG ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á) -->
            <a class="btn" href="{{ url_for('generate_qr', serial_number=serial_number) }}" download>
                üì• ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î QR Code (.PNG)
            </a>

            <!-- ‚úÖ ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô -->
            <audio id="doneSound" autoplay>
                <source src="{{ url_for('static', filename='audio/qrcodedone.mp3') }}" type="audio/mpeg">
                Browser ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡πÄ‡∏™‡∏µ‡∏¢‡∏á
            </audio>

            <script>
                window.onload = function () {
                    const audio = document.getElementById("doneSound");
                    if (audio) {
                        audio.play().catch(e => {
                            console.log("Autoplay blocked:", e);
                        });
                    }
                };
            </script>

        {% else %}
            <div class="warning">‚ö†Ô∏è ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡πÑ‡∏ü‡∏•‡πå QR ‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô QC ‡πÇ‡∏õ‡∏£‡∏î‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà...</div>
            <script>
                setTimeout(() => window.location.reload(), 3000);
            </script>
        {% endif %}

        <a class="btn" href="/login">üîÑ ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà</a>
    </div>
</body>
</html>